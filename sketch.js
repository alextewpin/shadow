const t={a:[106,47,101],b:[100,69,150],c:[34,32,52],d:[47,57,111],e:[95,107,180],f:[126,138,206],g:[56,192,220],h:[34,68,51],i:[31,122,119],k:[105,164,176],l:[219,148,185],m:[255,165,92],n:[0,0,0],o:[255,255,255]};const e=t.e;const n=t.c;const c=350;const s=480;const o=10;const a=19200;const i=a-100;const l=[300,5800,11100,14600];const r=300;let f;let p;let u;let h;let x;let g;let v;let d;let y;let w;let S;let k;const E=(t,e)=>({x:t,y:e,c1:0,c2:0,c3:1,c4:false,c5:false});const b=(t,e=0)=>{const n=E(t,s+e);n.c3=-1;n.c6=false;S.push(n)};const m=(t,e=0)=>{k.push({x:t,y:s-14+e,c7:false})};const R=(t,e,n,c=true)=>{w.push({x:t,y:s+e,width:n,c8:c})};const C=()=>{w=[];S=[];k=[];R(-15,0,4010);m(700);m(800);m(900);R(1500,-200,310,false);m(1600,-200);m(1700,-200);b(2250);m(2300,-150);b(3100);b(3400);m(3600);m(3700);m(3900);m(4050,-200);R(4200,-100,1290);m(4600,-250);m(4800,-250);b(5450,-100);m(5550,-250);R(5700,0,1350);R(6200,-200,850,false);b(6700,-200);b(7e3,-200);m(6300);m(6400,-60);m(6700);m(6800);R(7050,-350,490,false);m(7200,-350);m(7300,-350);m(7400,-350);R(7200,0,230);R(7550,0,1450);b(8030);b(8330);m(8500,-150);m(8600,-150);R(9200,0,1450);R(9800,-200,490,false);b(9950,-200);b(10200,-200);b(10200);m(10500);m(10600);m(10750,-150);R(11050,0,450);R(11500,-200,450,false);b(11650,-200);m(11750,-300);R(12200,-100,530);b(12400,-100);R(12830,0,430);m(13320,-150);m(13420,-150);R(13500,0,310);m(12900,-300);R(12990,-300,450,false);m(13250,-300);m(13350,-300);m(13450,-350);R(14e3,0,890);b(14080);b(14450);R(15080,-150,850,false);b(15650,-150);R(16e3,0,350);m(16100,-350);R(16200,-280,1030,false);m(16400,-350);m(16500,-350);b(17230,-280);m(16470,-150);R(16600,0,230);m(16860,-150);m(16960,-150);R(17e3,0,1110);b(17700,0);R(18390,0,2e3);b(18530,0);m(18550,-150);m(18650,-150);f=p-r;h=x;y=E(p,s)};const O=()=>{p=l[0];u=3;x=0;g=0;v=false;d=false;C()};let A=false;let L=false;let T=false;const P=()=>{A=false;L=false;T=false};const W=()=>{if(y.y>=height){y.c4=true;P()}if(y.c4){if(y.y>=2*height)if(u>=1){u--;C()}else d=true}else if(!v){g++;l.forEach(t=>{if(t>p&&y.x>=t){p=t;x=h}});const t=y.x-f;if(t<o)y.x=f+o;if(y.x>a-o)y.x=a-o;if(t>r&&f+width<a)f=y.x-r;if(y.x>=i){v=true;P()}}};const _=6;const z=9;const F=18;const I=.5;const j=.6;let G=0;const H=t=>{t.c4=true;t.c2=-7;t.c1=0;if(t===y)P()};const N=()=>{if(T&&G>=F){T=false;y.c5=true}else G++;if(T)y.c2=-z;if(L||A){const t=T||y.c5?.3*I:I;if(y.c1<_)y.c1=min(y.c1+t,_);else y.c1=max(y.c1-.2*t,_)}else{const t=T||y.c5?0:I;y.c1=max(y.c1-t,0)}};const U=()=>{S.forEach(t=>{if(!t.c6&&t.x<f+width)t.c6=true;if(t.c6)t.c1=1})};const Y=30;const q=(t,e)=>{const n=t.x>=e.x&&t.x<=e.x+e.width;const c=t.c5?t.y>=e.y&&t.y<=e.y+Y:t.y===e.y;if(n&&c){if(t.c2>0){t.y=e.y;t.c5=false;t.c2=0}return true}return false};const V=t=>{t.y+=t.c2;t.x+=t.c1*t.c3;let e=false;if(!t.c4)w.forEach(n=>{e=e||q(t,n)});if(!e)t.c5=true;if(t.c5)t.c2+=j};const B=20;const D=20;const J=15;const K=2;const M=-12;const Q=2;const X=()=>{if(!y.c4){S.forEach(t=>{if(!t.c4&&dist(t.x,t.y,y.x,y.y)<=B+D)if(y.c5&&y.y<t.y){H(t);y.c1+=K;y.c2=M}else H(y)});k.forEach((t,e)=>{if(!t.c7&&dist(t.x,t.y,y.x,y.y)<=B+J){t.c7=true;y.c1+=Q;h++}})}};const Z=()=>{V(y);S.forEach(V);X()};function keyPressed(){if(!y.c4&&!v)switch(keyCode){case LEFT_ARROW:A=true;L=false;if(1===y.c3){y.c3=-1;y.c1=-y.c1}break;case RIGHT_ARROW:L=true;A=false;if(-1===y.c3){y.c3=1;y.c1=-y.c1}break;case UP_ARROW:if(!y.c5){T=true;G=0}break}else if((v||d)&&32===keyCode)O()}function keyReleased(){if(!y.c4&&!v)switch(keyCode){case LEFT_ARROW:A=false;break;case RIGHT_ARROW:L=false;break;case UP_ARROW:if(T){T=false;y.c5=true}break}}function setup(){createCanvas(1024,576);frameRate(60);textFont("Verdana");O()}const $=(e,n,c=1,s=0,o=0,a=0)=>{push();translate(e,n);scale(c,1);fill(...t.m);push();rotate(s);translate(0,-11);ellipse(0,0,25,22);pop();push();rotate(s);translate(-11,-6);triangle(0,0,-10+o,-18+a,5,-12);pop();push();rotate(s);translate(-6,-14);triangle(0,0,-2+o,-18+a,14,-5);pop();push();rotate(s);translate(5,-1);triangle(0,0,17,-9,0,-13);pop();push();fill(...t.o);rotate(s);translate(0,-12);ellipse(0,0,12,12);pop();push();rotate(s);translate(-6,-22);rotate(.21);rect(0,0,15,7);pop();pop()};const tt=(e,n,c=1)=>{push();translate(e,n);scale(c,1);fill(...t.m);push();translate(3,0);triangle(0,0,2,-20,-8,-20);pop();push();translate(-6,0);triangle(0,0,6,-20,-4,-20);pop();push();translate(6,-41);fill(...t.f);beginShape();vertex(0,0);vertex(-1,26);vertex(-26,36);vertex(-15,18);vertex(-11,0);endShape(CLOSE);pop();pop()};const et=(e,n,c=1)=>{const s=ceil(frameCount/10)%2;push();translate(e,n);scale(c,1);fill(...t.m);if(s){push();translate(4,0);triangle(0,0,-2,-17,-11,-15);pop();push();translate(-20,-5);triangle(0,0,15,-10,5,-12);pop()}else{push();translate(-8,0);triangle(0,0,9,-12,2,-15);pop()}push();fill(...t.f);translate(8,-38);beginShape();vertex(0,0);vertex(-5,13);if(s){vertex(-5,26);vertex(-20,24);vertex(-34,20);vertex(-18,8)}else{vertex(-7,26);vertex(-20,22);vertex(-34,17);vertex(-18,7)}vertex(-12,-2);endShape(CLOSE);pop();pop()};const nt=(e,n,c=1)=>{push();translate(e,n);scale(c,1);fill(...t.m);push();translate(-2,-5);triangle(0,0,10,-16,2,-17);pop();push();translate(-15,-2);triangle(0,0,15,-16,7,-17);pop();push();translate(8,-38);fill(...t.f);beginShape();vertex(0,0);vertex(-2,10);vertex(0,19);vertex(-30,28);vertex(-15,8);vertex(-12,-2);endShape(CLOSE);pop();pop()};const ct=(e,n,c=1)=>{push();translate(e,n);scale(c,1);fill(...t.m);push();translate(3,0);triangle(0,0,2,-20,-8,-20);pop();push();translate(-6,0);triangle(0,0,6,-20,-4,-20);pop();push();translate(6,-41);fill(...t.f);beginShape();vertex(0,0);vertex(3,26);vertex(-12,28);vertex(-26,21);vertex(-15,13);vertex(-11,0);endShape(CLOSE);pop();pop()};const st=()=>{if(T||y.c5&&y.c2<=0)return"jumping";if(y.c5)return"falling";if(A||L||y.c1)return"walking";return"idle"};const ot=-40;const at=-38;const it=()=>{const t=st();const{x:e,y:n,c3:c}=y;switch(t){case"idle":$(e,n+ot,c);tt(e,n,c);break;case"walking":$(e,n+at,c,.31,-4,4);et(e,n,c);break;case"jumping":$(e,n+at,c,.31,-4,7);nt(e,n,c);break;case"falling":$(e,n+ot,c);ct(e,n,c);break}};const lt=30;const rt=-lt/2;const ft=45;const pt=20;const ut=-pt/2;const ht=()=>{const e=ceil(frameCount/14)%2;const n=e?lt:lt+2;const c=-n/2;const s=e?ft:ft-3;const o=e?pt:pt+2;const a=-o/2;const i=e?-18:-16;S.forEach(({x:e,y:l,c4:r})=>{push();translate(e-15,l);if(r){translate(0,-60);scale(1,-1)}fill(...t.l);rect(0,-20,40,20);ellipse(0,r?rt:c,r?lt:n);ellipse(20,-30,r?ft:s);ellipse(40,r?ut:a,r?pt:o);const f=r?14:18;const p=r?0:.5;const u=r?TWO_PI:PI+.5;fill(...t.o);arc(6,i,f,f,p,u);scale(-1,1);arc(-26,i,f,f,p,u);pop()})};const xt=(t,e,n,c)=>{const s=n/2;const o=n/10;const a=n/20;fill(...c);rect(0,0,width,e);let i=0;let l=0;push();translate(2*-n,0);while(i<25){const c=l%3;const r=t+s*l+o*c;if(r>=0){const t=l%2;ellipse(r,e+o*t+a*c,n+o*t);i++}l++}pop()};const gt=(t,e,c)=>{const s=.75*c;const o=c/9;const a=c/17;fill(...n);let i=0;let l=0;while(i<10){const n=l%2;const r=l%3;const f=t+s*l+o*n+a*r;if(f>=0){const t=c+o*n;push();translate(f-t,e);triangle(0,0,t,0,t/2,.5*-t);pop();i++}l++}};const vt=(t,e,n,c,s)=>{const o=n*s;const a=n/9;const i=n/17;fill(c);let l=0;let r=0;while(l<35){const c=r%2;const s=r%3;const f=n+a*c;const p=t+o*r+a*c+i*s;if(p>=0){push();translate(p-f,e);triangle(0,0,f,0,f/2,0-1.2*f);push();translate(i,-f/2);const t=f-2*i;triangle(0,0,t,0,t/2,1.4*-t);pop();pop();l++}r++}};const dt=()=>{const e=32;const n=1.5*e;k.forEach(({x:c,y:s,c7:o})=>{if(!o){push();translate(c,s);fill(...t.g);quad(-e/2,-n/2,0,-n,e/2,-n/2,0,0);fill(...t.o);triangle(0,-n,e/2,-n/2,0,-.45*n);pop()}})};const yt=30;const wt=25;const St=20;const kt=()=>{fill(...t.i);w.forEach(({x:e,y:n,width:c,c8:s})=>{push();translate(e,n);rect(0,0,c,s?height-n:35);fill(...t.k);const o=floor((c-(yt-St))/St);for(let t=0;t<o;t++){push();translate(t*St,0);triangle(0,0,yt,0,yt/2,wt);pop()}pop()})};const Et=()=>{const e=150;const n=ceil(frameCount/14)%2;push();translate(i,s-e);fill(...t.g);rect(0,0,5,e);translate(0,5);fill(...t.o);beginShape();vertex(0,0);if(n){vertex(-20,4);vertex(-40,13);vertex(-20,19)}else{vertex(-20,11);vertex(-40,17);vertex(-20,26)}vertex(0,30);endShape(CLOSE);pop()};const bt=()=>{fill(...t.n,130);rect(0,0,width,height)};const mt=t=>1===String(t).length?`0${t}`:String(t);const Rt=()=>{const t=floor(g/60);return`${floor(t/60)}:${mt(t%60)}`};const Ct=()=>{bt();fill(...t.o);textAlign(CENTER);textSize(80);text("You're the champion",0,200,width);textSize(40);text(`Total time: ${Rt()}`,0,280,width);text("Press space to restart",0,400,width)};const Ot=()=>{bt();fill(...t.o);textAlign(CENTER);textSize(80);text("You're so dead",0,200,width);textSize(40);text("Also out of lives",0,280,width);text("Press space to restart",0,400,width)};const At=()=>{push();translate(20,height-24);fill(...t.o);textSize(20);textAlign(LEFT);text(`Lives: ${u}`,0,0);text(`Time: ${Rt()}`,140,0);text(`Score: ${h}`,315,0);pop()};function draw(){W();N();U();Z();background(...e);noStroke();fill(...t.g);ellipse(710,240,80);xt(-frameCount/4,130,120,t.b);xt(-frameCount/2,-20,170,t.a);gt(-f/10,c,300);gt(-f/10,c,210);rect(0,c,width,100);vt(-f/5,s,80,t.d,.4);vt(-f/2,s,100,t.a,1.15);fill(...t.h);rect(0,s,width,height-s);push();translate(-f,0);kt();Et();ht();dt();it();pop();At();if(v)Ct();if(d)Ot()}